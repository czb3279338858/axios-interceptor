(function(s,a){typeof exports=="object"&&typeof module!="undefined"?a(exports,require("axios")):typeof define=="function"&&define.amd?define(["exports","axios"],a):(s=typeof globalThis!="undefined"?globalThis:s||self,a(s.AxiosInterceptor={},s.axios))})(this,function(s,a){"use strict";var U=Object.defineProperty,g=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var v=(s,a,u)=>a in s?U(s,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):s[a]=u,i=(s,a)=>{for(var u in a||(a={}))G.call(a,u)&&v(s,u,a[u]);if(O)for(var u of O(a))L.call(a,u)&&v(s,u,a[u]);return s},d=(s,a)=>g(s,x(a));function u(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var D=u(a);const q=e=>e===D.default.defaults.adapter,h=new Map,b=new Map;let M=0;function A(e){return function(t){if(!q(t.adapter))return t;const{checkToken:n,initToken:o,currentAxios:r,updateConfig:c}=e;if(n(t)||t._needToken)return t;h.size||o().then(()=>{h.forEach((p,C)=>{r.request(c(p)).then(P=>{var j;(j=b.get(C))==null||j(P),b.delete(C)})})}).finally(()=>{h.clear()}),h.set(++M,t);const l=new Promise((p,C)=>{b.set(M,p)});return d(i({},t),{adapter:()=>l})}}function F(e){const t=e.headers,n=e.method,o=t[n],r=t.common;["common","delete","get","head","post","put","patch"].forEach(l=>{delete t[l]});const y=Object.assign({},r,o,t);return d(i({},e),{headers:y})}const T=(e,t,n)=>{const o=t[0];if(t.length>1){const r=e[o];return typeof r!="object"||r===null?void 0:T(r,t.slice(1),n)}else e[o]=n},H=(e,t,n)=>T(e,t.split("."),n);let _=[];function m(e){const t=JSON.parse(JSON.stringify(e));return _.forEach(n=>{H(t,n,null)}),JSON.stringify(t)}_.push("params._timeStamp");function J(e){return e.method==="get"&&(e.params=d(i({},e.params),{_timeStamp:new Date().getTime()})),e}const R=(e,t="")=>{let n=[];for(const o in e){if(typeof o=="symbol")continue;const r=e[o];if(["symbol","function","undefined"].includes(typeof r))continue;const c=t?`${t}[${o}]`:`${o}`;typeof r=="object"&&r!==null?n.push(R(r,c)):n.push(`${encodeURIComponent(c)}=${encodeURIComponent(r===null?"":r)}`)}return n.join("&")};function K(e){const t=e.headers,n=t==null?void 0:t["Content-Type"],o=e.data;return n==="application/x-www-form-urlencoded"&&typeof o!="string"?d(i({},e),{data:R(o)}):n==="application/json"&&typeof o!="string"?d(i({},e),{data:JSON.stringify(o)}):e}const w=new Map,S=new Map;function N(e){if(!q(e.adapter))return e;const t=m(e),n=w.get(t);if(n)return d(i({},e),{adapter:n});{const o=new Promise((c,y)=>{S.set(t,c)}),r=()=>o;return w.set(t,r),e}}function $(e){const t=m(e.config),n=S.get(t);return n&&(n(e),w.delete(t),S.delete(t)),e}const f=new Map,k=new Map;function E(e){if(!q(e.adapter))return e;const t=m(e);if(e._cache){const n=f.get(t);return n?d(i({},e),{adapter:async()=>n}):e}return e._cleanMatchFun&&k.set(t,e._cleanMatchFun),e}function I(e){return t=>{const{config:n,data:o}=t,r=m(n);if(t.status===200&&(!e||o[e.statusKey]===e.successCode)){n._cache&&(f.get(r)||f.set(r,t));const c=k.get(r);c&&f.forEach((y,l)=>{const p=JSON.parse(l);c(p)&&f.delete(l)})}return k.delete(r),t}}s.buildRequestWaitToken=A,s.buildResponseCache=I,s.requestCache=E,s.requestDebounce=N,s.requestFormUrlencoded=K,s.requestGetAddTimeStamp=J,s.requestRepairConfig=F,s.responseDebounce=$,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
